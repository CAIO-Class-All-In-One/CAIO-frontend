import { createApp } from "vue";
import router from "./router";
import App from "./App.vue";

import "~/styles/index.css";
import { createPinia } from "pinia";
import Pretender from "pretender";

const app = createApp(App);
const pinia = createPinia();

app.use(pinia);
app.use(router);

app.mount("#app");

const server = new Pretender(function () {
  this.get("/api/auth/login", (request) => [
    200,
    {},
    JSON.stringify({
      msg: "yes",
      code: 2,
      data: {
        success: true,
        school: "njust",
        username: "root",
      },
    }),
  ]);
  this.get("api/user/:username", (request) => [
    200,
    {},
    JSON.stringify({
      msg: "yes",
      code: 2,
      data: { username: request.params["username"], school: "njust", email: "33@44.ww", unumber: "1234" },
    }),
  ]);
  this.post("api/user/:username", (request) => [
    200,
    {},
    JSON.stringify({
      msg: "yes",
      code: 2,
      data: {
        success: true,
      },
    }),
  ]);
  this.get("api/plugin/:value?type=school", (request) => [
    200,
    {},
    JSON.stringify({
      msg: "yes",
      code: 2,
      data: [{ school: "njust", repository: "github.com/ssss", version: "3.1.2", date: "2022-2-22", username: "hhh" }],
    }),
  ]);
  this.post("api/plugin/:value", (request) => {
    console.log(request.requestBody);
    if (request.requestBody.split("=").length <= 2) {
      return [
        200,
        {},
        JSON.stringify({
          msg: "yes",
          code: 2,
          data: {
            finished: false,
            info: {
              verifycode: `data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjIzMCIgdmlld0JveD0iMCAwIDg0MyAyMzAiIHdpZHRoPSI4NDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3QgZmlsbD0iI2ZmZiIgaGVpZ2h0PSIyMzAiIHJ4PSIyNCIgd2lkdGg9Ijg0MyIvPjxwYXRoIGQ9Im0yMSAxN2gzMC40NDhsMzAuODY1IDg5Ljg4NCA1LjQyMiAxOS4xODZoMS42NjhsNS44NC0xOS4xODYgMzIuMTE2LTg5Ljg4NGgzMC40NDhsLTU0LjQzMSAxNDkuMzE5aC0yOS42MTR6bTIxMS4yNTggMTM1Ljk3MmgtMS42NjljLTMuMTk3IDUuMTQ0LTcuNTA3IDkuMjExLTEyLjkzIDEyLjItNS40MjIgMi45ODktMTEuNjA5IDQuNDg0LTE4LjU2IDQuNDg0LTEyLjkzIDAtMjIuNTU4LTMuOTYyLTI4Ljg4NC0xMS44ODdzLTkuNDg5LTE4LjQ5MS05LjQ4OS0zMS42OTl2LTYxLjkzOGgyNy4zMnY1OC42MDFjMCA3LjM2OSAxLjYzMyAxMi44MjYgNC45MDEgMTYuMzcxIDMuMjY3IDMuNTQ1IDguMDI5IDUuMzE4IDE0LjI4NSA1LjMxOCAzLjc1NCAwIDcuMDU2LS43OTkgOS45MDYtMi4zOThzNS4yODMtMy43NTQgNy4yOTktNi40NjUgMy41NDUtNS45MDkgNC41ODgtOS41OTNjMS4wNDMtMy42ODUgMS41NjQtNy42MTIgMS41NjQtMTEuNzgzdi01MC4wNTFoMjcuMzJ2MTAyLjE4N2gtMjUuNjUxem0xNDEuNjAzLTExLjI2MWMtNC43MjcgOC4zNDItMTEuMDg4IDE1LjA4NS0xOS4wODIgMjAuMjI5LTcuOTk1IDUuMTQ0LTE3Ljc2MSA3LjcxNi0yOS4zMDEgNy43MTYtNy43ODYgMC0xNC45ODEtMS4zNTUtMjEuNTg1LTQuMDY3LTYuNjA0LTIuNzExLTEyLjMzOS02LjQ5OS0xNy4yMDUtMTEuMzY1cy04LjY1NC0xMC42MDEtMTEuMzY1LTE3LjIwNWMtMi43MTItNi42MDQtNC4wNjctMTMuODY5LTQuMDY3LTIxLjc5NCAwLTcuMzY4IDEuMzIxLTE0LjM1NSAzLjk2Mi0yMC45NTkgMi42NDItNi42MDMgNi4zMjYtMTIuMzczIDExLjA1My0xNy4zMDkgNC43MjctNC45MzUgMTAuMzIzLTguODYzIDE2Ljc4OC0xMS43ODMgNi40NjUtMi45MTkgMTMuNTktNC4zNzkgMjEuMzc2LTQuMzc5IDguMjAzIDAgMTUuNTAyIDEuMzU1IDIxLjg5OCA0LjA2NiA2LjM5NSAyLjcxMiAxMS43NDggNi40NjUgMTYuMDU4IDExLjI2MnM3LjU3NyAxMC40NjIgOS44MDEgMTYuOTk2YzIuMjI1IDYuNTM1IDMuMzM3IDEzLjYyNiAzLjMzNyAyMS4yNzJ2Mi41MDNjLS4xMzIuNzU4LS4yMDIgMS41MjUtLjIwOCAyLjI5NC0uMTQ1Ljc1Ni0uMjE1IDEuNTI0LS4yMDkgMi4yOTRoLTc2Ljk1NGMuNTU2IDQuMTcxIDEuNzAzIDcuNzUxIDMuNDQxIDEwLjc0czMuODkzIDUuNDkyIDYuNDY1IDcuNTA4IDUuMzg4IDMuNDc1IDguNDQ2IDQuMzc5YzMuMDQ3LjkwMiA2LjIwOCAxLjM1OSA5LjM4NSAxLjM1NiA2LjI1NiAwIDExLjQzNS0xLjQyNSAxNS41MzctNC4yNzYgNC4xMDEtMi44NSA3LjMzNC02LjQzIDkuNjk3LTEwLjc0em0tMjQuODE3LTM5LjYyNGMtLjEzOS0xLjgwNy0uNzMtMy44MjMtMS43NzMtNi4wNDgtMS4wNDMtMi4yMjQtMi41NzItNC4zMS00LjU4OC02LjI1Ni0yLjAxNi0xLjk0Ny00LjUxOC0zLjU0Ni03LjUwOC00Ljc5Ny0yLjk4OS0xLjI1MS02LjU2OS0xLjg3Ny0xMC43NC0xLjg3Ny01LjgzOSAwLTEwLjk4MyAxLjY2OS0xNS40MzIgNS4wMDUtNC40NDkgMy4zMzctNy41NzcgNy45OTUtOS4zODUgMTMuOTczeiIgZmlsbD0iIzE4Y2E4NCIvPjxnIGZpbGw9IiMyYzNlNTAiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQ4MS40NzEgMTd2MTAxLjk3OWMwIDguMzQyLTEuMjg2IDE1LjY3Ni0zLjg1OCAyMi4wMDJzLTYuMDQ4IDExLjYwOS0xMC40MjggMTUuODQ5Yy00LjM3OSA0LjI0MS05LjUyMyA3LjQzOS0xNS40MzIgOS41OTRzLTEyLjI3IDMuMjMyLTE5LjA4MiAzLjIzMmMtMTEuODE4IDAtMjIuMTQxLTMuMTk4LTMwLjk2OS05LjU5My04LjgyOS02LjM5NS0xNC45ODEtMTUuMjI0LTE4LjQ1Ny0yNi40ODVsMjUuODYtMTAuNjM2YzEuODA4IDYuNjczIDQuNzI3IDExLjY3OCA4Ljc1OSAxNS4wMTVzOC45NjggNS4wMDUgMTQuODA3IDUuMDA1YzYuNTM0IDAgMTEuNjA5LTIuMDg1IDE1LjIyNC02LjI1NnM1LjQyMi0xMC4wMTEgNS40MjItMTcuNTE4di03NC4wMzRoLTQ0LjEzNHYtMjguMTU0em05Mi44MjcgMTQ2LjkyOGMtMS4yMDUuNTk3LTIuNDMgMS4xNTEtMy42NzQgMS42NjEtNi42MDQgMi43MTItMTMuODY4IDQuMDY3LTIxLjc5MyA0LjA2Ny03LjkyNCAwLTE1LjE4OS0xLjM1NS0yMS43OTMtNC4wNjctNi42MDQtMi43MTEtMTIuMzA0LTYuNDY1LTE3LjEwMS0xMS4yNjEtNC43OTYtNC43OTctOC41NS0xMC41MzItMTEuMjYxLTE3LjIwNS0yLjcxMS02LjY3NC00LjA2Ny0xMy45NzMtNC4wNjctMjEuODk4IDAtNy45MjQgMS4zNTYtMTUuMjIzIDQuMDY3LTIxLjg5NyAyLjcxMS02LjY3MyA2LjQ2NS0xMi40MDggMTEuMjYxLTE3LjIwNSA0Ljc5Ny00Ljc5NyAxMC40OTctOC41NSAxNy4xMDEtMTEuMjYyIDYuNjA0LTIuNzExIDEzLjg2OS00LjA2NiAyMS43OTMtNC4wNjYgNy45MjUgMCAxNS4xODkgMS4zNTUgMjEuNzkzIDQuMDY2IDYuNjA0IDIuNzEyIDEyLjMwNSA2LjQ2NSAxNy4xMDEgMTEuMjYyIDQuNzk3IDQuNzk3IDguNTUxIDEwLjUzMiAxMS4yNjIgMTcuMjA1IDIuNzExIDYuNjc0IDQuMDY2IDEzLjk3MyA0LjA2NiAyMS44OTcgMCA3LjkyNS0xLjM1NSAxNS4yMjQtNC4wNjYgMjEuODk4LTIuNzExIDYuNjczLTYuNDY1IDEyLjQwOC0xMS4yNjIgMTcuMjA1LS40MTMuNDE0LS44MzQuODE5LTEuMjYxIDEuMjE3bDkuNTk0IDE0LjY2OWMxLjU2NC4xNjEgMy4wNzIuNjY4IDQuNDE0IDEuNDg1IDEuMzQzLjgxOCAyLjQ4NiAxLjkyNSAzLjM0NyAzLjI0bDIwLjQ4NyAzMS4zMjFjLjI1Ni4zOTIuNDMzLjgzMS41MiAxLjI5MXMuMDgyLjkzMy0uMDE0IDEuMzkxYy0uMDk2LjQ1OS0uMjgxLjg5NC0uNTQ1IDEuMjgxcy0uNjAyLjcxOC0uOTk0Ljk3NGwtMTIuOTMzIDguNDZjLS4zOTIuMjU2LS44MzEuNDMzLTEuMjkxLjUycy0uOTMzLjA4Mi0xLjM5MS0uMDE0Yy0uNDU5LS4wOTYtLjg5NC0uMjgxLTEuMjgxLS41NDVzLS43MTgtLjYwMi0uOTc0LS45OTRsLTIwLjQ4Ny0zMS4zMjFjLS44Ni0xLjMxNi0xLjQxNi0yLjgwNy0xLjYyNy00LjM2NC0uMjExLTEuNTU4LS4wNzEtMy4xNDMuNDA4LTQuNjR6bS0yNS40NjctMTkuNTA2YzMuNDc2IDAgNi44NDgtLjY2IDEwLjExNS0xLjk4MSAzLjI0NC0xLjMwNiA2LjE4OC0zLjI1NyA4LjY1NS01LjczNSAyLjUwMi0yLjUwMyA0LjQ4My01LjU2MiA1Ljk0My05LjE3NiAxLjQ2LTMuNjE1IDIuMTktNy43MTcgMi4xOS0xMi4zMDVzLS43My04LjY4OS0yLjE5LTEyLjMwNC0zLjQ0MS02LjY3My01Ljk0My05LjE3NmMtMi40NjctMi40NzgyLTUuNDExLTQuNDI5My04LjY1NS01LjczNS0zLjIxMS0xLjMwOTktNi42NDctMS45ODI3LTEwLjExNS0xLjk4MS0zLjYxNCAwLTcuMDIxLjY2LTEwLjIxOCAxLjk4MS0zLjE5OCAxLjMyMS02LjA0OCAzLjIzMy04LjU1MSA1LjczNS0yLjUwMiAyLjUwMy00LjQ4NCA1LjU2MS01Ljk0MyA5LjE3Ni0xLjQ2IDMuNjE1LTIuMTkgNy43MTYtMi4xOSAxMi4zMDRzLjczIDguNjkgMi4xOSAxMi4zMDVjMS40NTkgMy42MTQgMy40NDEgNi42NzMgNS45NDMgOS4xNzYgMi41MDMgMi41MDIgNS4zNTMgNC40MTQgOC41NTEgNS43MzUgMy4xOTcgMS4zMjEgNi42MDQgMS45ODEgMTAuMjE4IDEuOTgxeiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0ibTYxNi40IDE3aDI3LjMydjQ0LjgzOGwtMS42NjggMTQuNTk4aDEuNjY4YzIuNTAzLTQuMzEgNi4zOTUtNy45OTUgMTEuNjc5LTExLjA1MyA1LjI4My0zLjA1OSAxMS44MTctNC41ODggMTkuNjAzLTQuNTg4IDYuNTM0IDAgMTIuNzU2IDEuMzU1IDE4LjY2NSA0LjA2NiA1LjkwOSAyLjcxMiAxMS4xMjIgNi40NjUgMTUuNjQxIDExLjI2MiA0LjUxOCA0Ljc5NyA4LjA5OCAxMC41MzIgMTAuNzQgMTcuMjA1IDIuNjQyIDYuNjc0IDMuOTYyIDEzLjk3MyAzLjk2MiAyMS44OTcgMCA3LjkyNS0xLjMyIDE1LjIyNC0zLjk2MiAyMS44OTgtMi42NDIgNi42NzMtNi4yMjIgMTIuNDA4LTEwLjc0IDE3LjIwNS00LjUxOSA0Ljc5Ni05LjczMiA4LjU1LTE1LjY0MSAxMS4yNjEtNS45MDkgMi43MTItMTIuMTMxIDQuMDY3LTE4LjY2NSA0LjA2Ny03Ljc4NiAwLTE0LjMyLTEuNTI5LTE5LjYwMy00LjU4OC01LjI4NC0zLjA1OS05LjE3Ni02Ljc0My0xMS42NzktMTEuMDUzaC0xLjY2OHYxMi4zMDRoLTI1LjY1MnptNTIuOTcxIDEyNy40MjJjMy42MTUgMCA3LjA1Ni0uNjk1IDEwLjMyMy0yLjA4NiAzLjIzNS0xLjM2OCA2LjE3NS0zLjM1MSA4LjY1NS01LjgzOSAyLjUwMy0yLjUwMiA0LjUxOC01LjU2MSA2LjA0OC05LjE3NiAxLjUyOS0zLjYxNSAyLjI5NC03LjY0NyAyLjI5NC0xMi4wOTZzLS43NjUtOC40OC0yLjI5NC0xMi4wOTVjLTEuNTMtMy42MTUtMy41NDUtNi42NzQtNi4wNDgtOS4xNzYtMi40OC0yLjQ4NzgtNS40Mi00LjQ3MS04LjY1NS01Ljg0LTMuMjY3LTEuMzktNi43MDgtMi4wODUtMTAuMzIzLTIuMDg1cy03LjA1Ni42Ni0xMC4zMjMgMS45ODFjLTMuMjQ0IDEuMzA1Ny02LjE4OCAzLjI1NjgtOC42NTUgNS43MzUtMi41MDIgMi41MDMtNC41MTggNS41NjEtNi4wNDcgOS4xNzYtMS41MyAzLjYxNS0yLjI5NCA3LjcxNi0yLjI5NCAxMi4zMDRzLjc2NCA4LjY5IDIuMjk0IDEyLjMwNWMxLjUyOSAzLjYxNCAzLjU0NSA2LjY3MyA2LjA0NyA5LjE3NiAyLjQ2NyAyLjQ3OCA1LjQxMSA0LjQyOSA4LjY1NSA1LjczNSAzLjI2NyAxLjMyMSA2LjcwOCAxLjk4MSAxMC4zMjMgMS45ODF6bTEwOC40NDQgMjUuMjM0Yy02LjY3MyAwLTEyLjYxNy0uODM0LTE3LjgzLTIuNTAyLTUuMjE0LTEuNjY5LTkuNzMyLTMuODU5LTEzLjU1Ni02LjU3LTMuODIzLTIuNzExLTcuMDU2LTUuODM5LTkuNjk3LTkuMzg0LTIuNjQyLTMuNTQ2LTQuNjU4LTcuMTI2LTYuMDQ4LTEwLjc0bDI0LjQtMTAuNDI4YzIuMzYzIDUuMjgzIDUuNTI2IDkuMjExIDkuNDg5IDExLjc4MyAzLjk2MiAyLjU3MiA4LjM3NiAzLjg1OCAxMy4yNDIgMy44NTggNS4wMDYgMCA4Ljk2OC0uOTAzIDExLjg4OC0yLjcxMSAyLjkxOS0xLjgwNyA0LjM3OS0zLjk2MiA0LjM3OS02LjQ2NSAwLTIuNzgtMS4yMTYtNS4wNC0zLjY1LTYuNzc4LTIuNDMzLTEuNzM3LTYuNjM4LTMuMzAyLTEyLjYxNy00LjY5MmwtMTQuMzg5LTMuMTI4Yy0zLjE5OC0uNjk1LTYuNS0xLjgwNy05LjkwNi0zLjMzNy0zLjM1NS0xLjQ5Ny02LjQ4LTMuNDYzLTkuMjgxLTUuODM5LTIuNzgtMi4zNjQtNS4wNzQtNS4yMTQtNi44ODItOC41NTEtMS44MDctMy4zMzYtMi43MTEtNy4yMjktMi43MTEtMTEuNjc4IDAtNS4wMDUgMS4wNzgtOS40NTQgMy4yMzMtMTMuMzQ3czUuMTA5LTcuMTk1IDguODYzLTkuOTA2IDguMTY4LTQuNzk3IDEzLjI0My02LjI1NmM1LjA3NC0xLjQ2IDEwLjUzMS0yLjE5IDE2LjM3MS0yLjE5IDkuNzMyIDAgMTguNDIxIDEuOTExIDI2LjA2OCA1LjczNSA3LjY0NyAzLjgyMyAxMy4yNzcgOS45MDYgMTYuODkyIDE4LjI0OGwtMjMuNTY2IDkuNTkzYy0xLjk0Ni00LjAzMi00Ljc5Ni02Ljk1Mi04LjU1LTguNzU5LTMuNzU0LTEuODA4LTcuNTA4LTIuNzExLTExLjI2MS0yLjcxMS0zLjg5MyAwLTcuMy43OTktMTAuMjE5IDIuMzk4LTIuOTIgMS41OTktNC4zOCAzLjY1LTQuMzggNi4xNTIgMCAyLjM2NCAxLjIxNyA0LjI0MSAzLjY1IDUuNjMxczUuNzM1IDIuNjQxIDkuOTA2IDMuNzU0bDE1LjY0MSAzLjc1NGMxMC40MjcgMi41MDIgMTguMTc4IDYuNDk5IDIzLjI1MyAxMS45OTEgNS4wNzQgNS40OTIgNy42MTIgMTEuOTkxIDcuNjEyIDE5LjQ5OSAwIDQuNDQ5LTEuMDQzIDguNjktMy4xMjkgMTIuNzIxLTIuMDg1IDQuMDMyLTUuMDM5IDcuNjEyLTguODYzIDEwLjc0MS0zLjgyMyAzLjEyOC04LjQxMSA1LjU5Ni0xMy43NjQgNy40MDNzLTExLjI5NiAyLjcxMS0xNy44MzEgMi43MTF6Ii8+PC9nPjwvc3ZnPg==`,
            },
          },
        }),
      ];
    } else {
      return [
        200,
        {},
        JSON.stringify({
          msg: "yes",
          code: 2,
          data: {
            finished: true,
          },
        }),
      ];
    }
  });
});
